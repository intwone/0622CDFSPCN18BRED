<!DOCTYPE html>
<html lang="pt-BR">
	<head>
		<meta charset="UTF-8" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Products House | Carrinho</title>
		<link rel="stylesheet" href="/css/global.css" />
		<link
			href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/css/bootstrap.min.css"
			rel="stylesheet"
			integrity="sha384-0evHe/X+R7YkIZDRvuzKMRqM+OrBnVFBL6DOitfPri4tjfHxaWutUpFmBp4vmVor"
			crossorigin="anonymous"
		/>
	</head>

	<body>
		<%- include('./components/header.ejs') %>

		<main class="">
			<section class="container" style="margin-top: 120px">
				<h1>Carrinho</h1>
				<table class="table table-dark table-striped table-bordered">
					<thead>
						<tr>
							<th scope="col">ID</th>
							<th scope="col">imagem</th>
							<th scope="col">Nome</th>
							<th scope="col">Quantidade</th>
							<th scope="col">PreÃ§o</th>
							<th scope="col">AÃ§Ãµes</th>
						</tr>
					</thead>
					<tbody>
						<% if(!carrinho.length) { %>
						<h3>Carrinho Vazio! ðŸ˜”</h3>
						<% } else { carrinho.forEach(produto => { %>
						<tr>
							<th scope="row"><%= produto.id %></th>
							<td>
								<img class="thumb" src="<%= produto.image %>" alt="" width="100px" height="100px" />
							</td>
							<td><%= produto.name %></td>
							<td>1</td>
							<td><%= produto.price %></td>
							<td>
								<form action="/carrinho/<%= produto.id %>/deletar?_method=DELETE" method="POST">
									<button type="submit" class="btn btn-danger">Excluir</button>
								</form>
							</td>
						</tr>
						<% }) %> <% } %>
					</tbody>
				</table>
				<h1>R$ <%= total.toLocaleString('pt-br', {style: 'decimal', maximumFractionDigits: 2}) %></h1>
			</section>
		</main>

		<%- include('./components/footer') %>
	</body>
</html>
