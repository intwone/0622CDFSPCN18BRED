<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />

		<link rel="stylesheet" href="/css/home-admin.css" />

		<link
			href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css"
			rel="stylesheet"
			integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65"
			crossorigin="anonymous"
		/>

		<script
			src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"
			integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4"
			crossorigin="anonymous"
			defer
		></script>

		<title>Admin</title>
	</head>

	<body>
		<main>
			<div class="page">
				<%- include('../components/admin/sideBar.ejs') %>

				<section class="content">
					<div class="d-flex flex-column mt-3">
						<h1 class="mb-3">Produtos</h1>
						<a
							href="/admin/produtos/cadastro"
							class="btn btn-primary mb-3"
							>Cadastrar</a
						>
					</div>

					<table
						class="table table-dark table-striped table-bordered"
					>
						<thead>
							<tr>
								<th scope="col">ID</th>
								<th scope="col">imagem</th>
								<th scope="col">Nome</th>
								<th scope="col">Preço</th>
								<th scope="col">Ativo</th>
								<th scope="col">Estoque</th>
								<th scope="col">Ações</th>
							</tr>
						</thead>

						<tbody>
							<% products.forEach(product => { %>
							<tr>
								<th scope="row"><%= product.id %></th>
								<td>
									<img
										class="thumb"
										src="<%= product.image%>"
										alt=""
										width="100px"
										height="100px"
									/>
								</td>
								<td><%= product.name%></td>
								<td><%= product.price%></td>
								<td>
									<%= product.active ? "Habilitado" :
									"Desabilitado" %>
								</td>
								<td>
									<%= product.stock ? "Em estoque" : "Sem estoque" %>
								</td>
								<td>
									<a
										href="/produto.html"
										type="button"
										class="btn btn-primary"
										>Abrir</a
									>
									<a
										href="/admin/produtos/<%= product.id %>/editar"
										type="button"
										class="btn btn-secondary"
										>Editar</a
									>

									<form
										action="/admin/produtos/<%= product.id %>/deletar?_method=DELETE"
										method="POST"
									>
										<button
											type="submit"
											class="btn btn-danger"
										>
											Excluir
										</button>
									</form>
								</td>
							</tr>
							<% }) %>
						</tbody>
					</table>
				</section>
			</div>
		</main>
	</body>
</html>
